# åˆå§‹åŒ–é¡¹ç›®

## éœ€è¦çš„ä¿¡æ¯æ¥æº

pnpm ä¸­æ–‡æ–‡æ¡£ : https://www.pnpm.cn/

Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ï¼šhttps://vitejs.cn/vite3-cn/

## æ–°å»º vite é¡¹ç›®

ä½¿ç”¨ pnpm åŒ…ç®¡ç†å™¨

```bash
pnpm create vite
```

éœ€è¦å¡«å†™ä½ çš„é¡¹ç›®åç§°ï¼Œç„¶åé€‰æ‹© Vue ä¸  TypeScript

```bash
âˆš Project name: ... your-project-name
âˆš Select a framework: Â» Vue
âˆš Select a variant: Â» TypeScript
```

ç›®å½•ç»“æ„

```text
â”‚   .gitignore # git å¿½ç•¥æ–‡ä»¶
â”‚   index.html # å…¥å£HTML
â”‚   package.json # é¡¹ç›®é…ç½®æ–‡ä»¶
â”‚   README.md 
â”‚   tsconfig.json #  tsé¡¹ç›®é…ç½®æ–‡ä»¶
â”‚   tsconfig.node.json 
â”‚   vite.config.ts # vite é…ç½®æ–‡ä»¶
â”‚
â”‚
â”œâ”€â”€â”€public # ä¸æ‰“åŒ…çš„é™æ€èµ„æº
â”‚       vite.svg # ç½‘ç«™å›¾æ ‡
â”‚
â””â”€â”€â”€src # ä¸»ç›®å½•
    â”‚   App.vue # ä¸»ç»„ä»¶
    â”‚   main.ts # å…¥å£æ–‡ä»¶
    â”‚   style.css # æ ·å¼æ–‡ä»¶
    â”‚   vite-env.d.ts # viteç¯å¢ƒé…ç½®æ–‡ä»¶
    â”‚
    â”œâ”€â”€â”€assets
    â”‚       vue.svg # éœ€è¦æ‰“åŒ…çš„é™æ€èµ„æº
    â”‚
    â””â”€â”€â”€components # ç»„ä»¶ç›®å½•
            HelloWorld.vue # ç»„ä»¶
```

`tsconfig.json` æ˜¯ ts é¡¹ç›®çš„é¡¹ç›®é…ç½®æ–‡ä»¶

[tsconfig.json å®˜æ–¹æ–‡æ¡£](https://www.tslang.cn/docs/handbook/tsconfig-json.html)

CSDN [ä½ ä¸çŸ¥é“çš„ tsconfig.json](https://blog.csdn.net/azl397985856/article/details/108090980?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-5&spm=1001.2101.3001.4242)

è¿™é‡Œç›´æ¥ä½¿ç”¨è¿™äº›

`tsconfig.json`

```json
{
  "compilerOptions": {
    // æŒ‡å®šECMAScriptç›®æ ‡ç‰ˆæœ¬ï¼Œesnextä¸ºæœ€æ–°ç‰ˆæœ¬
    "target": "esnext",
    // æŒ‡å®šç”Ÿæˆå“ªä¸ªæ¨¡å—ç³»ç»Ÿä»£ç ï¼Œesnextä¸ºæœ€æ–°ç‰ˆæœ¬
    "module": "esnext",
    // å†³å®šå¦‚ä½•å¤„ç†æ¨¡å—ã€‚
    "moduleResolution": "node",
    // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹ã€‚
    "strict": true,
    // ç¦æ­¢å¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸ä¸€è‡´çš„å¼•ç”¨ã€‚
    "forceConsistentCasingInFileNames": true,
    // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚è¿™å¹¶ä¸å½±å“ä»£ç çš„è¾“å‡ºï¼Œä»…ä¸ºäº†ç±»å‹æ£€æŸ¥ã€‚
    "allowSyntheticDefaultImports": true,
    // ç¦ç”¨å‡½æ•°å‚æ•°åŒå‘åå˜æ£€æŸ¥ã€‚
    "strictFunctionTypes": false,
    // åœ¨ .tsxæ–‡ä»¶é‡Œæ”¯æŒJSX
    "jsx": "preserve",
    // è§£æéç›¸å¯¹æ¨¡å—åçš„åŸºå‡†ç›®å½•ã€‚æŸ¥çœ‹ æ¨¡å—è§£ææ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚
    "baseUrl": ".",
    // å…è®¸ç¼–è¯‘javascriptæ–‡ä»¶ã€‚
    "allowJs": true,
    // ç”Ÿæˆç›¸åº”çš„ .mapæ–‡ä»¶ã€‚
    "sourceMap": true,
    "esModuleInterop": true,
    "resolveJsonModule": true,
    // è‹¥æœ‰æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡åˆ™æŠ›é”™ã€‚
    "noUnusedLocals": true,
    // è‹¥æœ‰æœªä½¿ç”¨çš„å‚æ•°åˆ™æŠ›é”™ã€‚
    "noUnusedParameters": true,
    // å¯ç”¨å®éªŒæ€§çš„ESè£…é¥°å™¨ã€‚
    "experimentalDecorators": true,
    // ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦å¼•å…¥çš„åº“æ–‡ä»¶çš„åˆ—è¡¨ã€‚
    "lib": ["dom", "esnext"],
    // è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨ã€‚
    "types": ["vite/client"],
    // è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶è·¯å¾„åˆ—è¡¨ã€‚
    "typeRoots": ["./node_modules/@types/", "./types"],
    "incremental": true,
    // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™ã€‚
    "noImplicitAny": false,
    // å¿½ç•¥æ‰€æœ‰çš„å£°æ˜æ–‡ä»¶ï¼ˆ *.d.tsï¼‰çš„ç±»å‹æ£€æŸ¥ã€‚
    "skipLibCheck": true,
    // æ¨¡å—ååˆ°åŸºäº baseUrlçš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨ã€‚æŸ¥çœ‹ æ¨¡å—è§£ææ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚
    "paths": {
      "@/*": ["src/*"],
      "#/*": ["types/*"]
    }
  },
  // æŒ‡å®šä¸€ä¸ªåŒ¹é…åˆ—è¡¨ï¼ˆå±äºè‡ªåŠ¨æŒ‡å®šè¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰tsç›¸å…³æ–‡ä»¶ï¼‰
  "include": [
    "src/**/*.ts",
    "src/**/*.d.ts",
    "src/**/*.tsx",
    "src/**/*.vue",
    "types/**/*.d.ts",
    "types/**/*.ts",
    "mock/**/*.ts"
  ],
  // æŒ‡å®šä¸€ä¸ªæ’é™¤åˆ—è¡¨ï¼ˆincludeçš„åå‘æ“ä½œï¼‰
  "exclude": ["node_modules", "dist", "**/*.js"],
}
```

## è§„èŒƒåŒ–æ’ä»¶

### ä»£ç è§„èŒƒ

å‚è€ƒä¿¡æ¯ï¼š çŸ¥ä¹  [æœ€å…¨çš„Eslinté…ç½®æ¨¡æ¿ï¼Œä»æ­¤ç»Ÿä¸€å›¢é˜Ÿçš„ç¼–ç¨‹ä¹ æƒ¯](https://zhuanlan.zhihu.com/p/87667635)


ESLint æ˜¯ä¸€ä¸ªä»£ç è§„èŒƒå’Œé”™è¯¯æ£€æŸ¥å·¥å…·ï¼Œè€Œprettieræ˜¯å¸®åŠ©ä½ æ ¼å¼åŒ–ä»£ç çš„å·¥å…·ï¼Œå¯ä»¥å¸®ä½ æŠŠä¸è§„èŒƒçš„ä»£ç æ”¹æ‰ï¼ŒStylelint ç”¨äºæ ¡éªŒé¡¹ç›®å†…éƒ¨ css çš„é£æ ¼,åŠ ä¸Šç¼–è¾‘å™¨çš„è‡ªåŠ¨ä¿®å¤ï¼Œå¯ä»¥å¾ˆå¥½çš„ç»Ÿä¸€é¡¹ç›®å†…éƒ¨ css é£æ ¼

å¯ä»¥è§„èŒƒä½ çš„ä»£ç æ ¼å¼ï¼Œå¯ä»¥ç»Ÿä¸€å›¢é˜Ÿä»£ç é£æ ¼

åœ¨é¡¹ç›®ä¸­å®‰è£…(æœ¬é¡¹ç›® ts) å®‰è£…åˆ°å¼€å‘ä¾èµ–ï¼Œå…ˆå®‰è£… `ESLint` ä¸ `Prettier` çš„ä¾èµ–

```bash
pnpm i eslint babel-eslint eslint-define-config vue-eslint-parser eslint-plugin-vue @typescript-eslint/parser @typescript-eslint/eslint-plugin prettier eslint-config-prettier eslint-plugin-prettier pretty-quick jest eslint-plugin-jest -D
```

`eslint-plugin-vue` : ESlint æ£€æŸ¥vueæ–‡ä»¶éœ€è¦çš„ä¾èµ–

`vue-eslint-parser` :  vueçš„æ¨¡æ¿è§£æå™¨

`eslint-define-config` : æä¾›äº†ä¸€äº›é»˜è®¤é…ç½®ä¸ defineConfig å‡½æ•°

`eslint-plugin-prettier` : è§£å†³ prettierå’ŒESLintä¹‹é—´æœ‰äº›è§„åˆ™å†²çª,ä¾‹å¦‚å®šä¹‰å‡½æ•°æ—¶å‡½æ•°åä¸æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼ 

`prettier` : æ ¼å¼åŒ–ä»£ç æ’ä»¶

`pretty-quick`: å¯ä»¥ä½¿ä½ åœ¨æäº¤ä»£ç çš„æ—¶å€™æ ¼å¼åŒ–ä»£ç 


#### ESlint

æ·»åŠ ESlint è§„åˆ™é…ç½®æ–‡ä»¶`.eslintrc.cjs`

> å› ä¸ºæœ€æ–° vite æ¨¡æ¿çš„ `package.json` è®¾ç½®äº† `"type": "module"` åä½ çš„æ‰€æœ‰jsæ–‡ä»¶é»˜è®¤ä½¿ç”¨ESMæ¨¡å—è§„èŒƒï¼Œä¸æ”¯æŒcommonjsè§„èŒƒï¼Œæ‰€ä»¥å¿…é¡»æ˜¾å¼çš„å£°æ˜æˆxxx.cjsæ‰èƒ½æ ‡è¯†è¿™ä¸ªæ˜¯ç”¨commonjsè§„èŒƒçš„ï¼ŒæŠŠä½ çš„é…ç½®éƒ½æ”¹æˆ.cjsåç¼€

```js
// è¯¦è§£é…ç½®https://www.bbsmax.com/A/QW5YV9eedm/
// @ts-check
const { defineConfig } = require("eslint-define-config");
module.exports = defineConfig({
    // â†“é»˜è®¤æƒ…å†µä¸‹ï¼ŒESLint ä¼šåœ¨æ‰€æœ‰çˆ¶çº§ç›®å½•é‡Œå¯»æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¸€ç›´åˆ°æ ¹ç›®å½•ã€‚å¦‚æœä½ æƒ³è¦ä½ æ‰€æœ‰é¡¹ç›®éƒ½éµå¾ªä¸€ä¸ªç‰¹å®šçš„çº¦å®šæ—¶ï¼Œè¿™å°†ä¼šå¾ˆæœ‰ç”¨ï¼Œä½†æœ‰æ—¶å€™ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ä¸ºäº†å°† ESLint é™åˆ¶åˆ°ä¸€ä¸ªç‰¹å®šçš„é¡¹ç›®ï¼Œåœ¨ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶æˆ–è€… .eslintrc.* æ–‡ä»¶é‡Œçš„ eslintConfig å­—æ®µä¸‹è®¾ç½® "root": trueã€‚ESLint ä¸€æ—¦å‘ç°é…ç½®æ–‡ä»¶ä¸­æœ‰ "root": trueï¼Œå®ƒå°±ä¼šåœæ­¢åœ¨çˆ¶çº§ç›®å½•ä¸­å¯»æ‰¾ã€‚
    // ä»¥å½“å‰ç›®å½•ä¸ºæ ¹ç›®å½•ï¼Œä¸å†å‘ä¸ŠæŸ¥æ‰¾ .eslintrc.js
    root: true,
    // â†“æŒ‡å®šä½ æƒ³å¯ç”¨çš„ç¯å¢ƒ
    env: {
        browser: true,
        node: true,
        es6: true,
    },
    // â†“è®¾ç½®è§£æå™¨
    parser: "vue-eslint-parser",
    // â†“è§£æå™¨é€‰é¡¹
    parserOptions: {
        //  Typescriptè¯­æ³•çš„è§£æå™¨ é¡¹ç›®åœ°å€ï¼š https://github.com/typescript-eslint/typescript-eslint/tree/main/packages/parser
        parser: "@typescript-eslint/parser",
        // ä½¿ç”¨æœ€æ–°ç‰ˆ
        ecmaVersion: "latest",
        sourceType: "module",
        jsxPragma: "React",
        ecmaFeatures: {
            jsx: true,
        },
    },
    extends: ["plugin:vue/vue3-recommended", "plugin:@typescript-eslint/recommended", "prettier", "plugin:prettier/recommended", "plugin:jest/recommended"],
    // â†“è‡ªå®šä¹‰è§„åˆ™é…ç½®
    rules: {
        // â†“ç¦æ­¢ä½¿ç”¨@ts-ignoreæ¥æ¶ˆé™¤ESLintæ£€æŸ¥
        "@typescript-eslint/ban-ts-ignore": "off",
        // â†“åœ¨å‡½æ•°å’Œç±»æ–¹æ³•ä¸Šéœ€è¦æ˜¾å¼çš„è¿”å›ç±»å‹
        "@typescript-eslint/explicit-function-return-type": "off",
        // â†“ç¦æ­¢ä½¿ç”¨anyç±»å‹
        "@typescript-eslint/no-explicit-any": "off",
        // â†“é™¤å¯¼å…¥è¯­å¥å¤–ï¼Œç¦æ­¢ä½¿ç”¨requireè¯­å¥
        "@typescript-eslint/no-var-requires": "off",
        // â†“ç¦æ­¢ä½¿ç”¨ç©ºå‡½æ•°
        "@typescript-eslint/no-empty-function": "off",
        // â†“å¯¹è‡ªå®šä¹‰äº‹ä»¶åç§°å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šçš„å¤§å°å†™
        "vue/custom-event-name-casing": "off",
        // â†“ç¦æ­¢å®šä¹‰å‰ä½¿ç”¨
        "no-use-before-define": "off",
        // â†“åœ¨å®šä¹‰å˜é‡ä¹‹å‰ä¸å…è®¸ä½¿ç”¨å˜é‡
        "@typescript-eslint/no-use-before-define": "off",
        // â†“ç¦æ­¢ä½¿ç”¨@ts-æ³¨è§£
        "@typescript-eslint/ban-ts-comment": "off",
        // â†“ç¦æ­¢ä½¿ç”¨ç‰¹å®šç±»å‹
        "@typescript-eslint/ban-types": "off",
        // â†“ç¦æ­¢ä½¿ç”¨!åç¼€è¿ç®—ç¬¦è¿›è¡Œénullæ–­è¨€
        "@typescript-eslint/no-non-null-assertion": "off",
        // â†“åœ¨å¯¼å‡ºçš„å‡½æ•°å’Œç±»çš„å…¬å…±ç±»æ–¹æ³•ä¸Šéœ€è¦æ˜¾å¼çš„è¿”å›å€¼å’Œå‚æ•°ç±»å‹
        "@typescript-eslint/explicit-module-boundary-types": "off",
        // // â†“ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
        "@typescript-eslint/no-unused-vars": [
            "error",
            {
                argsIgnorePattern: "^_",
                varsIgnorePattern: "^_",
            },
        ],
        // â†“ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
        "no-unused-vars": [
            "error",
            {
                argsIgnorePattern: "^_",
                varsIgnorePattern: "^_",
            },
        ],
        // â†“åœ¨å‡½æ•°æ‹¬å·å‰éœ€è¦æˆ–ä¸å…è®¸æœ‰ç©ºæ ¼
        "space-before-function-paren": "off",
        // â†“å¼ºåˆ¶å±æ€§é¡ºåº
        "vue/attributes-order": "off",
        // â†“å¼ºåˆ¶æ¯ä¸ªç»„ä»¶åº”ä½äºå…¶è‡ªå·±çš„æ–‡ä»¶ä¸­
        "vue/one-component-per-file": "off",
        // â†“åœ¨æ ‡ç­¾çš„å³æ‹¬å·ä¹‹å‰è¦æ±‚æˆ–ä¸å…è®¸æ¢è¡Œ
        "vue/html-closing-bracket-newline": "off",
        // â†“å¼ºåˆ¶æ¯è¡Œçš„æœ€å¤§å±æ€§æ•°
        "vue/max-attributes-per-line": "off",
        // â†“åœ¨å¤šè¡Œå…ƒç´ çš„å†…å®¹ä¹‹å‰å’Œä¹‹åéœ€è¦æ¢è¡Œ
        "vue/multiline-html-element-content-newline": "off",
        // â†“åœ¨å•è¡Œå…ƒç´ çš„å†…å®¹ä¹‹å‰å’Œä¹‹åéœ€è¦æ¢è¡Œ
        "vue/singleline-html-element-content-newline": "off",
        // â†“åœ¨æ¨¡æ¿ä¸­çš„è‡ªå®šä¹‰ç»„ä»¶ä¸Šå®æ–½å±æ€§å‘½åæ ·å¼
        "vue/attribute-hyphenation": "off",
        // â†“éœ€è¦é“å…·çš„é»˜è®¤å€¼
        "vue/require-default-prop": "off",
        // â†“å®æ–½è‡ªæˆ‘å°é—­çš„é£æ ¼
        // 'vue/html-self-closing': 'off',
        "vue/html-self-closing": [
            "error",
            {
                html: {
                    void: "always",
                    normal: "never",
                    component: "always",
                },
                svg: "always",
                math: "always",
            },
        ],
        // ä½¿ç”¨script-setupéœ€è¦å¼•å…¥è¿™ä¸ª,å½“ç»„ä»¶æœªä½¿ç”¨æˆ–è€…å˜é‡æœªä½¿ç”¨æ—¶åšçš„æ“ä½œ
        "vue/script-setup-uses-vars": "error",
    },
});
```

å¢åŠ  Elint å¿½ç•¥æ–‡ä»¶ï¼Œåœ¨è¿™äº›åœ°æ–¹ç¦ç”¨æ£€æŸ¥

`.eslintignore`

```
*.sh
node_modules
*.md
*.woff
*.ttf
.vscode
.idea
dist
/public
/docs
.husky
.local
/bin
Dockerfile
```

åœ¨`package.json`æ–‡ä»¶ä¸‹`scripts`æ ‡ç­¾ä¸­æ·»åŠ è¿è¡Œè„šæœ¬

```json
"lint:eslint": "eslint --cache --max-warnings 0  \"{src,mock}/**/*.{vue,ts,tsx}\" --fix",
```

é…ç½®å®Œåå¯ä»¥é€šè¿‡å‘½ä»¤ ï¼š `pnpm run lint:eslint` æ¥æ£€æŸ¥é¡¹ç›®å†…çš„æ ¼å¼é”™è¯¯

#### Prettier

æ·»åŠ é…ç½®æ–‡ä»¶: `prettier.config.cjs`

```js
// é…ç½®è¯¦è§£ https://www.cnblogs.com/linjunfu/p/10880381.html
module.exports = {
  // è¶…è¿‡æœ€å¤§å€¼æ¢è¡Œ
  printWidth: 100,
  // tabç¼©è¿›å¤§å°,é»˜è®¤ä¸º2
  tabWidth: 2,
  // ä½¿ç”¨åˆ†å·, é»˜è®¤true
  semi: false,
  // ä½¿ç”¨tableç¼©è¿›,å…³é—­åˆ™ä½¿ç”¨ç©ºæ ¼
  useTabs: false,
  vueIndentScriptAndStyle: true,
  // ä½¿ç”¨å•å¼•å·, é»˜è®¤false(åœ¨jsxä¸­é…ç½®æ— æ•ˆ, é»˜è®¤éƒ½æ˜¯åŒå¼•å·)
  singleQuote: true,
  // å¼•ç”¨å¯¹è±¡ä¸­çš„å±æ€§æ—¶æ›´æ”¹
  quoteProps: 'as-needed',
  // åœ¨å¯¹è±¡æ–‡å­—ä¸­æ‰“å°æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼ { foo: bar }
  bracketSpacing: true,
  // å¤šè¡Œæ—¶å°½å¯èƒ½æ‰“å°å°¾éšé€—å·ã€‚ï¼ˆä¾‹å¦‚ï¼Œå•è¡Œæ•°ç»„æ°¸è¿œä¸ä¼šå¾—åˆ°å°¾éšé€—å·ã€‚ï¼‰
  trailingComma: 'es5',
  // å¤šè¡Œ JSX å…ƒç´ æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œï¼ˆä¸é€‚ç”¨äºè‡ªé—­å…ƒç´ ï¼‰
  jsxBracketSameLine: false,
  // åœ¨JSXä¸­ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·ã€‚
  jsxSingleQuote: false,
  // åœ¨å•ä¸ªç®­å¤´å‡½æ•°å‚æ•°å‘¨å›´åŠ ä¸Šæ‹¬å·ã€‚
  arrowParens: 'always',
  // Prettier å¯ä»¥åœ¨æ–‡ä»¶é¡¶éƒ¨æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„ @format æ ‡è®°ï¼ŒæŒ‡å®šæ–‡ä»¶æ ¼å¼éœ€è¦è¢«æ ¼å¼åŒ–ã€‚
  insertPragma: false,
  // Prettier å¯ä»¥å°†è‡ªå·±é™åˆ¶ä¸ºä»…åœ¨æ–‡ä»¶é¡¶éƒ¨æ ¼å¼åŒ–åŒ…å«ç‰¹æ®Šæ³¨é‡Šï¼ˆç§°ä¸ºpragmaï¼‰çš„æ–‡ä»¶ã€‚
  requirePragma: false,
  // æ˜¯å¦æ¢è¡Œ Prose Wrap
  proseWrap: 'never',
  // æŒ‡å®š HTML æ–‡ä»¶çš„å…¨å±€ç©ºç™½åŒºåŸŸæ•æ„Ÿåº¦
  htmlWhitespaceSensitivity: 'strict',
  // æŒ‡å®šè¡Œå°¾åºåˆ—
  endOfLine: 'lf',
  // æ ¼å¼åŒ–å¼€å§‹çš„å­—ç¬¦,ä»ç¬¬0ä¸ªå¼€å§‹
  rangeStart: 0,
  // æ²¡æœ‰å°¾éšé€—å·
  trailingComma: 'none',
}
```

å¢åŠ å¿½ç•¥æ–‡ä»¶ï¼Œåœ¨è¿™äº›åœ°æ–¹ç¦ç”¨æ ¼å¼åŒ–

`.prettierignore`

```
/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*

```

åœ¨ `package.json` æ–‡ä»¶ä¸‹ `scripts` æ ‡ç­¾ä¸­æ·»åŠ è¿è¡Œè„šæœ¬

```json
"lint:prettier": "prettier --write --loglevel warn \"src/**/*.{js,json,tsx,css,less,scss,vue,html,md}\"",
```

åŒæ ·çš„ï¼Œè¿è¡Œï¼š  `pnpm run lint:prettier` å°±å¯ä»¥å¯¹é¡¹ç›®çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–


**`VS Code` é…ç½®** 

åœ¨é¡¹ç›®æ ¹æ–‡ä»¶å¤¹æ·»åŠ  `.vscode` æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  `settings.json` å°±å¯ä»¥å¯¹æœ¬é¡¹ç›®å·¥ä½œç©ºé—´è¿›è¡Œ `VS Code` è®¾ç½®ï¼Œä¸ä¼šå½±å“å…¶ä»–é¡¹ç›®

```json
{
    "eslint.format.enable": true,
    "editor.formatOnSave": true, //æ¯æ¬¡ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true // æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰eslintæ ¼å¼è¿›è¡Œä¿®å¤
    },
    "[javascript]": {
        "editor.defaultFormatter": "dbaeumer.vscode-eslint"
    },
}
```

#### Stylelint 

stylelint ç”¨äºæ ¡éªŒé¡¹ç›®å†…éƒ¨ css çš„é£æ ¼,åŠ ä¸Šç¼–è¾‘å™¨çš„è‡ªåŠ¨ä¿®å¤ï¼Œå¯ä»¥å¾ˆå¥½çš„ç»Ÿä¸€é¡¹ç›®å†…éƒ¨ css é£æ ¼

é¡¹ç›®ä¸­å®‰è£…å¼€å‘ä¾èµ–

```bash
pnpm i stylelint stylelint-config-prettier stylelint-config-standard stylelint-order -D
```

- [stylelintå®˜ç½‘](https://stylelint.io/)
- [stylelintçš„npmé¦–é¡µ](https://www.npmjs.com/package/stylelint)
- [stylelint-config-standardçš„npmé¦–é¡µ](https://www.npmjs.com/package/stylelint-config-standard)ï¼šæ‰©å±•ï¼Œæ ‡å‡†åº“
- [stylelint-config-prettierçš„npmé¦–é¡µ](https://www.npmjs.com/package/stylelint-config-prettier)ï¼šæ‰©å±•ï¼Œè§£å†³å†²çªçš„
- [stylelint-orderçš„npmé¦–é¡µ](https://www.npmjs.com/package/stylelint-order)ï¼šæ’ä»¶ï¼Œæ ·å¼æ’åº
- [stylelinitçš„é…ç½®è¯´æ˜](https://stylelint.io/user-guide/configure#ignorefiles)
- [stylelintçš„é…ç½®è§„åˆ™](https://stylelint.io/user-guide/rules/list)

é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨ vue ä¸ lessï¼Œè¿˜éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–


```bash
pnpm i stylelint-config-recommended stylelint-config-recommended-vue postcss postcss-html postcss-less -D
```



æ ¹ç›®å½• stylelint é…ç½®æ–‡ä»¶ `stylelint.config.cjs`

```js
module.exports = {
  root: true,
  // â†“æ’ä»¶
  plugins: ['stylelint-order'],
  // â†“æ‰©å±•
  extends: ['stylelint-config-standard', 'stylelint-config-prettier'],
  // â†“è‡ªå®šä¹‰è§„åˆ™
  rules: {
    // â†“ç¦æ­¢ä½¿ç”¨æœªçŸ¥çš„ä¼ªç±»é€‰æ‹©å™¨ã€‚
    'selector-pseudo-class-no-unknown': [
      true,
      {
        ignorePseudoClasses: ['global']
      }
    ],
    'selector-pseudo-element-no-unknown': [
      true,
      {
        ignorePseudoElements: ['v-deep']
      }
    ],
    // â†“ç¦æ­¢ä½¿ç”¨æœªçŸ¥è§„åˆ™ã€‚
    'at-rule-no-unknown': [
      true,
      {
        ignoreAtRules: [
          'tailwind',
          'apply',
          'variants',
          'responsive',
          'screen',
          'function',
          'if',
          'each',
          'include',
          'mixin'
        ]
      }
    ],
    // â†“ç¦æ­¢ç©ºæ¥æºã€‚
    'no-empty-source': null,
    // â†“ç¦æ­¢ä½¿ç”¨æ— æ•ˆçš„å‘½åç½‘æ ¼åŒºåŸŸã€‚
    'named-grid-areas-no-invalid': null,
    // â†“è¦æ±‚æˆ–ä¸å…è®¸ä½¿ç”¨Unicodeå­—èŠ‚é¡ºåºæ ‡è®°ã€‚
    'unicode-bom': 'never',
    // â†“ç¦æ­¢è¾ƒä½ç‰¹å¼‚æ€§çš„é€‰æ‹©å™¨åœ¨è¦†ç›–è¾ƒé«˜ç‰¹å¼‚æ€§çš„é€‰æ‹©å™¨ä¹‹åå‡ºç°ã€‚
    'no-descending-specificity': null,
    // â†“ç¦æ­¢åœ¨å­—ä½“ç³»åˆ—åç§°åˆ—è¡¨ä¸­ç¼ºå°‘é€šç”¨ç³»åˆ—ã€‚
    'font-family-no-missing-generic-family-keyword': null,
    // â†“åœ¨å£°æ˜çš„å†’å·åé¢éœ€è¦ä¸€ä¸ªç©ºæ ¼æˆ–ç¦æ­¢ç©ºæ ¼ã€‚
    'declaration-colon-space-after': 'always-single-line',
    // â†“åœ¨å£°æ˜çš„å†’å·ä¹‹å‰éœ€è¦ä¸€ä¸ªç©ºæ ¼æˆ–ç¦æ­¢ä½¿ç”¨ç©ºæ ¼ã€‚
    'declaration-colon-space-before': 'never',
    // â†“åœ¨å£°æ˜å—å†…è¦æ±‚æˆ–ä¸å…è®¸å°¾éšåˆ†å·ã€‚
    // 'declaration-block-trailing-semicolon': 'always',
    // â†“åœ¨è§„åˆ™ä¹‹å‰è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ç©ºè¡Œã€‚
    'rule-empty-line-before': [
      'always',
      {
        ignore: ['after-comment', 'first-nested']
      }
    ],
    // â†“ç¦æ­¢ä½¿ç”¨æœªçŸ¥å•ä½ã€‚
    'unit-no-unknown': [true, { ignoreUnits: ['rpx'] }],
    // â†“æ ·å¼é¡ºåº
    'order/order': [
      [
        'dollar-variables',
        'custom-properties',
        'at-rules',
        'declarations',
        {
          type: 'at-rule',
          name: 'supports'
        },
        {
          type: 'at-rule',
          name: 'media'
        },
        'rules'
      ],
      { severity: 'warning' }
    ]
  },
  // â†“å¿½ç•¥æ£€æŸ¥çš„æ–‡ä»¶
  ignoreFiles: ['**/*.js', '**/*.jsx', '**/*.tsx', '**/*.ts'],
  overrides: [
    {
      files: ['*.vue', '**/*.vue', '*.html', '**/*.html'],
      customSyntax: 'postcss-html',
      extends: ['stylelint-config-recommended'],
      rules: {
        'keyframes-name-pattern': null,
        'selector-pseudo-class-no-unknown': [
          true,
          {
            // å¿½ç•¥ä¼ªç±»
            ignorePseudoClasses: ['deep', 'global']
          }
        ],
        'selector-pseudo-element-no-unknown': [
          true,
          {
            // å¿½ç•¥ä¼ªå…ƒç´ 
            ignorePseudoElements: ['v-deep', 'v-global', 'v-slotted']
          }
        ]
      }
    },
    {
      files: ['*.less', '**/*.less'],
      customSyntax: 'postcss-less',
      extends: ['stylelint-config-standard', 'stylelint-config-recommended-vue']
    }
  ]
}

```

æ·»åŠ å¿½ç•¥æ–‡ä»¶ `.stylelintignore`

```
/dist/*
/public/*
public/*
```

åœ¨ `package.json` æ–‡ä»¶ä¸‹ `scripts` æ ‡ç­¾ä¸­æ·»åŠ è¿è¡Œè„šæœ¬




### æäº¤ä¿¡æ¯è§„èŒƒ



åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­ï¼Œæ¯ä¸ªäººçš„ git çš„ commit ä¿¡æ¯éƒ½ä¸ä¸€æ ·ï¼Œäº”èŠ±å…«é—¨ï¼Œæ²¡æœ‰ä¸€ä¸ªæœºåˆ¶å¾ˆéš¾ä¿è¯è§„èŒƒåŒ–ï¼Œå¦‚ä½•æ‰èƒ½è§„èŒƒåŒ–å‘¢ï¼Ÿå¯èƒ½ä½ æƒ³åˆ°çš„æ˜¯ git çš„ hook æœºåˆ¶ï¼Œå»å†™ shell è„šæœ¬å»å®ç°ã€‚è¿™å½“ç„¶å¯ä»¥ï¼Œå…¶å® JavaScript æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·å¯ä»¥å®ç°è¿™ä¸ªæ¨¡æ¿ï¼Œå®ƒå°±æ˜¯ commitlintã€‚

åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­ï¼Œæ¯ä¸ªäººçš„ git çš„ commit ä¿¡æ¯éƒ½ä¸ä¸€æ ·ï¼Œäº”èŠ±å…«é—¨ï¼Œæ²¡æœ‰ä¸€ä¸ªæœºåˆ¶å¾ˆéš¾ä¿è¯è§„èŒƒåŒ–ï¼Œå¦‚ä½•æ‰èƒ½è§„èŒƒåŒ–å‘¢ï¼Ÿå¯èƒ½ä½ æƒ³åˆ°çš„æ˜¯ git çš„ hook æœºåˆ¶ï¼Œå»å†™ shell è„šæœ¬å»å®ç°ã€‚è¿™å½“ç„¶å¯ä»¥ï¼Œå…¶å® JavaScript æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·å¯ä»¥å®ç°è¿™ä¸ªæ¨¡æ¿ï¼Œå®ƒå°±æ˜¯ commitlintã€‚

#### commitlint

å®˜ç½‘ï¼š https://commitlint.js.org/#/


```bash
pnpm i -D @commitlint/cli
```


å¢åŠ é…ç½®æ–‡ä»¶

`commitlint.config.cjs`

```js
module.exports = {
  parserPreset: {
    parserOpts: {
      headerPattern:
        /^(?<type>.*\s\w*)(?:\((?<scope>.*)\))?!?:\s(?<subject>(?:(?!#).)*(?:(?!\s).))$/,
      headerCorrespondence: ['type', 'scope', 'subject']
    }
  },
  // â†“è‡ªå®šä¹‰æäº¤æ¶ˆæ¯è§„åˆ™ å®˜æ–¹æ–‡æ¡£ï¼š https://commitlint.js.org/#/reference-rules
  rules: {
    // â†“bodyä»¥ç©ºç™½è¡Œå¼€å¤´
    'body-leading-blank': [2, 'always'],
    // â†“footerä»¥ç©ºç™½è¡Œå¼€å¤´
    'footer-leading-blank': [1, 'always'],
    // â†“headerçš„æœ€å¤§é•¿åº¦
    'header-max-length': [2, 'always', 108],
    // â†“subjectä¸ºç©º
    'subject-empty': [2, 'never'],
    // â†“typeä¸ºç©º
    'type-empty': [2, 'never'],
    // typeçš„ç±»å‹
    'type-enum': [
      2,
      'always',
      [
        // å¢åŠ æ–°çš„ç‰¹å¾
        'âœ¨ feat',
        // ä¿®å¤ bug
        'ğŸ fix',
        // æé«˜æ€§èƒ½çš„ä»£ç æ›´æ”¹
        'âš¡ perf',
        // ä¸å½±å“ä»£ç å«ä¹‰çš„ä¿®æ”¹ï¼Œæ¯”å¦‚ç©ºæ ¼ã€æ ¼å¼åŒ–ã€ç¼ºå¤±çš„åˆ†å·ç­‰
        'ğŸŒˆ style',
        // å¯¹æ–‡æ¡£è¿›è¡Œäº†ä¿®æ”¹
        'ğŸ“ƒ docs',
        // å¢åŠ ç¡®å®çš„æµ‹è¯•æˆ–è€…çŸ«æ­£å·²å­˜åœ¨çš„æµ‹è¯•
        'ğŸ§ª test',
        // æ—¢ä¸æ˜¯ä¿®å¤ bug ä¹Ÿä¸æ˜¯æ·»åŠ ç‰¹å¾çš„ä»£ç é‡æ„
        'ğŸ¦„ refactor',
        // å¯¹æ„å»ºç³»ç»Ÿæˆ–è€…å¤–éƒ¨ä¾èµ–é¡¹è¿›è¡Œäº†ä¿®æ”¹
        'ğŸ”§ build',
        // å¯¹ CI é…ç½®æ–‡ä»¶æˆ–è„šæœ¬è¿›è¡Œäº†ä¿®æ”¹,æŒç»­é›†æˆç›¸å…³æ–‡ä»¶ä¿®æ”¹
        'ğŸ ci',
        // å…¶ä»–ä¿®æ”¹ï¼ˆä¸åœ¨ä¸Šè¿°ç±»å‹ä¸­çš„ä¿®æ”¹ï¼‰
        'ğŸ³ chore',
        // å½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commitï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Header
        'ğŸ”„ revert',
        // å¼€å‘ä¸­
        'ğŸš§ wip',
        // å·¥ä½œæµä¿®æ”¹
        'ğŸ—ƒï¸ workflow',
        // ç±»å‹ä¿®æ”¹
        'ğŸ“¦ types',
        // å‘å¸ƒæ–°ç‰ˆæœ¬
        'ğŸª§ release'
      ]
    ]
  }
}


```

#### husky

`git hook` ä¸€èˆ¬ç»“åˆå„ç§ `lint`ï¼Œåœ¨ `git` æäº¤ä»£ç çš„æ—¶å€™è¿›è¡Œä»£ç é£æ ¼æ ¡éªŒï¼Œå¦‚æœæ ¡éªŒæ²¡é€šè¿‡ï¼Œåˆ™ä¸ä¼šè¿›è¡Œæäº¤ã€‚éœ€è¦å¼€å‘è€…è‡ªè¡Œä¿®æ”¹åå†æ¬¡è¿›è¡Œæäº¤ã€‚

ä¹Ÿå¯ä»¥åœ¨ hook ä¸­æ‰§è¡Œæäº¤ä»£ç å‰çš„æ“ä½œè„šæœ¬ï¼Œæ¯”å¦‚æ‰§è¡Œä»£ç æ ¼å¼åŒ–ã€‚ç¨åä¹Ÿéœ€è¦æ·»åŠ ä»£ç æ ¼å¼åŒ–çš„ hook

å®‰è£… 

```bash
pnpm i -D husky lint-staged
```

åˆå§‹åŒ– husky

```bash
pnpm husky install
```

æŸ¥çœ‹`.git/config`ï¼Œå¯ä»¥çœ‹åˆ°é…ç½®ä¸­ä¿®æ”¹äº†`core.hooksPath`æŒ‡å‘ä¸º`.husky`ã€‚è¿™å°±æ˜¯`husky 6.0.0`çš„å®ç°åŸç†ï¼šæ›¿æ¢`.git/hooks`çš„ç›®å½•ä¸ºè‡ªå®šä¹‰ç›®å½•ï¼Œä¸”è¯¥ç›®å½•ä¼šæäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

æ·»åŠ  `husky install` åˆ° `package.json scripts` ä¸­

```bash
"prepare": "husky install",
```


#### lint-staged


æ•´ä¸ªé¡¹ç›®ä¸Šè¿è¡Œ lint é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œ`lint-staged` èƒ½å¤Ÿè®©lintåªæ£€æµ‹æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«

å®‰è£…

```bash
pnpm i -D lint-staged
```

æ·»åŠ  `lint-staged` éœ€è¦è¿è¡Œçš„è„šæœ¬ï¼Œå¯¹æš‚å­˜åŒºçš„æŒ‡å®šæ ¼å¼çš„æ–‡ä»¶æ ¼å¼åŒ–

åœ¨ `package.json` ä¸­æ·»åŠ 

```json
{
	 "lint-staged": {
	    "*.{js,jsx,ts,tsx,cjs}": [
	      "eslint --fix",
	      "prettier --write"
	    ],
	    "{!(package)*.json,*.code-snippets,.!(browserslist)*rc}": [
	      "prettier --write--parser json"
	    ],
	    "package.json": [
	      "prettier --write"
	    ],
	    "*.vue": [
	      "eslint --fix",
	      "prettier --write",
	      "stylelint --fix"
	    ],
	    "*.{scss,less,styl,html}": [
	      "stylelint --fix",
	      "prettier --write"
	    ],
	    "*.md": [
	      "prettier --write"
	    ]
	  }
  }
```


æ·»åŠ è„šæœ¬ ï¼Œ`lint:pretty` æ ¼å¼åŒ–æš‚å­˜åŒºæ–‡ä»¶ï¼Œ`lint:lint-staged` æ‰§è¡Œé‚£äº›è„šæœ¬


```json
    "lint:lint-staged": "lint-staged",
    
	"lint:pretty": "pretty-quick --staged",
```




åœ¨ `husky` ä¸­æ·»åŠ é’©å­ï¼Œæäº¤çš„æ—¶å€™æ‰§è¡Œ


```bash
npx husky add .husky/pre-commit "pnpm run lint:lint-staged"
npx husky add .husky/pre-commit "pnpm run lint:pretty"
```


#### commitizen

`commitizen` è¿™ä¸ªæ’ä»¶å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œè¯¢é—®çš„æ–¹å¼ä¸ºæˆ‘ä»¬æäº¤è§„èŒƒçš„ commit æ¶ˆæ¯

å¾ˆæ–¹ä¾¿åœ°å¸®æˆ‘ä»¬è§„èŒƒäº† commit ä¿¡æ¯

å®‰è£… 

```bash
pnpm i commitizen cz-customizable -D -S
```

cz-customizable æ˜¯ commitizen çš„ä¸€ä¸ªé€‚é…å™¨ï¼Œå¯ä»¥å®šåˆ¶æäº¤çš„ä¿¡æ¯ä¸è¯¢é—®çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æŠŠè¯¢é—®ä¿¡æ¯æ¢æˆä¸­æ–‡çš„ï¼Œä¹Ÿå¯ä»¥é€‚é…æˆ‘ä»¬ä¹‹å‰å®šåˆ¶çš„åŠ  emoji çš„æäº¤ä¿¡æ¯å•¦

cz-customizable é¡¹ç›®åœ°å€ https://github.com/leoforfree/cz-customizable

æ·»åŠ  cz-customizable çš„é…ç½®æ–‡ä»¶

`.cz-config.cjs`

```js
'use strict'

module.exports = {
  types: [
    { value: 'âœ¨ feat', name: 'âœ¨ feat    : å¢åŠ æ–°çš„ç‰¹æ€§' },
    { value: 'ğŸ fix', name: 'ğŸ fix     : ä¿®å¤ bug' },
    { value: 'âš¡ perf', name: 'âš¡ perf    : æé«˜æ€§èƒ½çš„ä»£ç æ›´æ”¹' },
    {
      value: 'ğŸŒˆ style',
      name: 'ğŸŒˆ style   : ä¸å½±å“ä»£ç å«ä¹‰çš„ä¿®æ”¹ï¼Œæ¯”å¦‚ç©ºæ ¼ã€æ ¼å¼åŒ–ã€ç¼ºå¤±çš„åˆ†å·ç­‰'
    },
    { value: 'ğŸ“ƒ docs', name: 'ğŸ“ƒ docs    : å¯¹æ–‡æ¡£è¿›è¡Œäº†ä¿®æ”¹' },
    { value: 'ğŸ§ª test', name: 'ğŸ§ª test    : å¢åŠ ç¡®å®çš„æµ‹è¯•æˆ–è€…çŸ«æ­£å·²å­˜åœ¨çš„æµ‹è¯•' },
    { value: 'ğŸ¦„ refactor', name: 'ğŸ¦„ refactor: æ—¢ä¸æ˜¯ä¿®å¤ bug ä¹Ÿä¸æ˜¯æ·»åŠ ç‰¹å¾çš„ä»£ç é‡æ„' },
    { value: 'ğŸ”§ build', name: 'ğŸ”§ build   : å¯¹æ„å»ºç³»ç»Ÿæˆ–è€…å¤–éƒ¨ä¾èµ–é¡¹è¿›è¡Œäº†ä¿®æ”¹' },
    { value: 'ğŸ ci', name: 'ğŸ ci      : å¯¹ CI é…ç½®æ–‡ä»¶æˆ–è„šæœ¬è¿›è¡Œäº†ä¿®æ”¹,æŒç»­é›†æˆç›¸å…³æ–‡ä»¶ä¿®æ”¹' },
    { value: 'ğŸ³ chore', name: 'ğŸ³ chore   : å…¶ä»–ä¿®æ”¹ï¼ˆä¸åœ¨ä¸Šè¿°ç±»å‹ä¸­çš„ä¿®æ”¹ï¼‰' },
    {
      value: 'ğŸ”„ revert',
      name: 'ğŸ”„ revert  : å½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commitï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Header'
    },
    { value: 'âš™ï¸ wip', name: 'âš™ï¸ wip      : å¼€å‘ä¸­' },
    { value: 'ğŸ—ƒï¸ workflow', name: 'ğŸ—ƒï¸  workflow : å·¥ä½œæµä¿®æ”¹' },
    { value: 'ğŸ“¦ types', name: 'ğŸ“¦ types   : ç±»å‹ä¿®æ”¹' },
    { value: 'ğŸª§ release', name: 'ğŸª§  release  : å‘å¸ƒæ–°ç‰ˆæœ¬' }
  ],
  messages: {
    type: 'é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:',
    scope: 'é€‰æ‹©ä¸€ä¸ªscope (å¯é€‰):',
    subject: 'çŸ­è¯´æ˜:\n',
    body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨"|"æ¢è¡Œ(å¯é€‰):\n',
    breaking: 'éå…¼å®¹æ€§è¯´æ˜ (å¯é€‰):\n',
    footer: 'å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚:#31, #34(å¯é€‰):\n',
    confirmCommit: 'ç¡®å®šæäº¤è¯´æ˜?'
  },
  // å…è®¸è‡ªå®šä¹‰ä½œç”¨åŸŸ
  allowCustomScopes: true,

  // æœ‰èŒƒå›´åå¯ä»¥æ·»åŠ ä½ çš„èŒƒå›´è¿›å»ï¼Œæ¯”å¦‚æ¨¡å—1ï¼ŒåŠŸèƒ½1
  scopes: [],

  // ç ´åæ€§æ›´æ–°æ—¶å‰ç¼€
  breakingPrefix: 'ğŸš§ BREAKING CHANGES ğŸš§',
  // è¿™äº›é€‰é¡¹è§¦å‘ç ´åæ€§æ›´æ–°é€‰é¡¹
  allowBreakingChanges: ['feat', 'fix', 'chore'],
  // ISSUE å‰ç¼€
  footerPrefix: 'CLOSES ISSUE:',
  // ä¸»é¢˜çš„æœ€å¤§å­—ç¬¦æ•°
  subjectLimit: 100
}

```

å› ä¸ºæ˜¯ `cjs` æ–‡ä»¶ï¼Œè¯†åˆ«ä¸åˆ°æ‰€ä»¥éœ€è¦åœ¨ `package.json` æ·»åŠ é…ç½®

```json
{
  "config": {
    "cz-customizable": {
      "config": ".cz-config.cjs"
    }
  },
}
```


### ç‰ˆæœ¬è¿­ä»£

ç”¨æ¥ç®¡ç†é¡¹ç›®ç‰ˆæœ¬å·

è§„èŒƒè¯·çœ‹ ä¸­æ–‡ç‰ˆï¼š[è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://semver.org/lang/zh-CN/)

è¿™é‡Œå‚è€ƒæ–‡ç«  ï¼š  [å¦‚ä½•è‡ªå®šä¹‰ conventional-changelog](https://blog.csdn.net/qq_41887214/article/details/124183764)

è¿˜çœ‹äº† [ä» Commit è§„èŒƒåŒ–åˆ°å‘å¸ƒè‡ªå®šä¹‰ CHANGELOG æ¨¡ç‰ˆ](https://juejin.cn/post/6844903888072654856)

#### conventional-changelog-cli

`CHANGELOG.md` æ˜¯è®°å½•ç‰ˆæœ¬è¿­ä»£ä¿¡æ¯çš„æ–‡ä»¶ï¼Œé‡Œé¢è¯¦ç»†å†™äº†åœ¨å“ªä¸ªç‰ˆæœ¬åšäº†å“ªäº›äº‹

è€Œ `conventional-changelog-cli` å¯ä»¥æ ¹æ®æˆ‘ä»¬çš„ `git` æäº¤ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶

[é¡¹ç›®ä¸»é¡µ](https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli)


å®‰è£…

```bash
pnpm i -D conventional-changelog-cli conventional-changelog-custom-config
```

ç”±äºæˆ‘ä»¬æ·»åŠ äº† emoji è¡¨æƒ…ï¼Œè¯†åˆ«ä¸å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±å®šä¹‰å¦‚ä½•è¾“å‡ºæ–‡ä»¶ `CHANGELOG.md`

æ–°å¢ `changelog-option.cjs`

```js
const compareFunc = require('compare-func')
module.exports = {
  writerOpts: {
    transform: (commit, context) => {
      const issues = []

      if (commit.body && commit.body.indexOf('ğŸš§ BREAKING CHANGES ğŸš§')) {
        discard = false
      }

      if (!commit.type) {
        let headerPattern =
          /^(?<type>.*\s\w*)(?:\((?<scope>.*)\))?!?:\s(?<subject>(?:(?!#).)*(?:(?!\s).))$/
        commit.type = ('' + commit.header).replace(headerPattern, '$1')
      }

      if (commit.type === 'âœ¨ feat' || commit.type === 'feat') {
        commit.type = 'âœ¨ Features | æ–°åŠŸèƒ½'
      } else if (commit.type === 'ğŸ fix' || commit.type === 'fix') {
        commit.type = 'ğŸ Bug Fixes | Bug ä¿®å¤'
      } else if (commit.type === 'âš¡ perf' || commit.type === 'perf') {
        commit.type = 'âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–'
      } else if (commit.type === 'âª revert' || commit.type === 'revert' || commit.revert) {
        commit.type = 'âª Reverts | å›é€€'
      } else if (commit.type === 'ğŸ“ƒ docs' || commit.type === 'docs') {
        commit.type = 'ğŸ“ƒ Documentation | æ–‡æ¡£'
      } else if (commit.type === 'ğŸŒˆ style' || commit.type === 'style') {
        commit.type = 'ğŸŒˆ Styles | é£æ ¼'
      } else if (commit.type === 'ğŸ¦„ refactor' || commit.type === 'refactor') {
        commit.type = 'ğŸ¦„ Code Refactoring | ä»£ç é‡æ„'
      } else if (commit.type === 'ğŸ§ª test' || commit.type === 'test') {
        commit.type = 'ğŸ§ª Tests | æµ‹è¯•'
      } else if (commit.type === 'ğŸ”§ build' || commit.type === 'build') {
        commit.type = 'ğŸ”§â€ Build System | æ„å»º'
      } else if (commit.type === 'ğŸ ci' || commit.type === 'ci') {
        commit.type = 'ğŸ Continuous Integration | CI é…ç½®'
      } else if (commit.type === 'ğŸ³ chore' || commit.type === 'chore') {
        commit.type = 'ğŸ³ Chores | å…¶ä»–æ›´æ–°'
      }

      if (commit.scope === '*') {
        commit.scope = ''
      }
      if (typeof commit.hash === 'string') {
        commit.hash = commit.hash.substring(0, 7)
      }
      console.log(context)

      if (typeof commit.subject === 'string') {
        let url = context.repository
          ? `${context.host}/${context.owner}/${context.repository}`
          : context.repoUrl
        if (url) {
          url = `${url}/issues/`
          // Issue URLs.
          commit.subject = commit.subject.replace(/#([0-9]+)/g, (_, issue) => {
            issues.push(issue)
            return `[#${issue}](${url}${issue})`
          })
        }
        if (context.host) {
          // User URLs.
          commit.subject = commit.subject.replace(
            /\B@([a-z0-9](?:-?[a-z0-9/]){0,38})/g,
            (_, username) => {
              if (username.includes('/')) {
                return `@${username}`
              }

              return `[@${username}](${context.host}/${username})`
            }
          )
        }
      }

      // remove references that already appear in the subject
      commit.references = commit.references.filter((reference) => {
        if (issues.indexOf(reference.issue) === -1) {
          return true
        }

        return false
      })
      return commit
    },
    groupBy: 'type',
    commitGroupsSort: 'title',
    commitsSort: ['scope', 'subject'],
    noteGroupsSort: 'title',
    notesSort: compareFunc
  }
}

```


`package.json`æ·»åŠ è„šæœ¬

```json
"changelog": "conventional-changelog -p custom-config -i CHANGELOG.md -s -r 0  -n ./changelog-option.cjs"
```

ä»¥åå°±å¯ä»¥æ‰§è¡Œ `pnpm run changelog` æ¥ç”Ÿæˆæ›´æ”¹æ–‡ä»¶äº†

#### release-it

`release-it` ä¼š
-   æ ¹æ®ä¸Šä¸€ä¸ªç‰ˆæœ¬æ ‡ç­¾ï¼ˆTagï¼‰ä¸æœ€æ–°å†å²è¿›è¡Œå¯¹æ¯”å¹¶äº§å‡ºæ—¥å¿—åˆ°æ—¥å¿—æ–‡ä»¶ï¼›
-   è§£ææ—¥å¿—å†…å®¹æ›´æ–°ç‰ˆæœ¬å·ï¼›
-   æäº¤å†…å®¹å˜åŒ–å¹¶æ‰“ä¸Šç‰ˆæœ¬æ ‡ç­¾ï¼›
-   æ¨é€è‡³è¿œç¨‹ä»“åº“

[é¡¹ç›®ä¸»é¡µ](https://github.com/release-it/release-it)

å®‰è£…

```bash
pnpm i -D release-it
```

æ·»åŠ è„šæœ¬

```bash
"release": "release-it --no-npm"
```

ä¹‹åå°±å¯ä»¥æ‰§è¡Œ`pnpm run release` æ¥è¿›è¡Œç‰ˆæœ¬å‘å¸ƒäº†

ä¸è¿‡å‰ææ¡ä»¶æ˜¯æ‰€æœ‰æ–‡ä»¶å·²ç»æäº¤ï¼Œæ²¡æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œæš‚å­˜åŒºæ²¡æœ‰æ–‡ä»¶

## è„šæœ¬æ€»ç»“

å‘ç°é”™è¯¯
```bash
pnpm run lint:eslint
```

æ ¼å¼åŒ–ä»£ç 
```bash
pnpm run lint:prettier
```


æ ¼å¼åŒ–æ ·å¼ä»£ç 
```bash
pnpm run lint:stylelint
```


é’©å­åˆå§‹åŒ–
```bash
pnpm run prepare
```

æš‚å­˜åŒºæ–‡ä»¶æ ¼å¼åŒ–
```bash
pnpm run lint:lint-staged
```


ç”Ÿæˆæ›´æ”¹è®°å½•æ–‡ä»¶
```bash
pnpm run changelog
```


ç‰ˆæœ¬å‘å¸ƒ
```bash
pnpm run release
```
